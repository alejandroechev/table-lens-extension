<!DOCTYPE html>
<html>
<head>
    <title>Test Nested Tables - Before Fix</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { margin: 20px 0; padding: 10px; border: 1px solid #ccc; }
        table { border-collapse: collapse; }
        td, th { border: 1px solid #ddd; padding: 8px; }
        .highlight { background-color: yellow; }
    </style>
</head>
<body>
    <h1>ðŸ§ª Nested Tables Test Page</h1>
    
    <!-- This is the problematic nested table structure -->
    <table name="GroupContainer" class="displayPageTable table table-thead" role="presentation">
        <tbody>
            <tr role="presentation">
                <td role="presentation" colspan="2"></td>
            </tr>
            <tr role="presentation">
                <td role="presentation" colspan="2">
                    <div name="IFD_204_1_recordGroupContainer">
                        <table name="IFD_204_1_record_Table" id="ConsultaSaldoYMovimientosPortletPersonaip_consultaSaldoIFD_204_1_record_table" width="100%" class="table table-striped border-bottom mb-0">
                            <tbody>
                                <tr name="TableHeaderContainer" class="tableHeadRow">
                                    <th name="FECOPE_iso8601_ColumnHeaderSorted">Fecha</th>
                                    <th name="OBSERVA_ColumnHeaderSorted">Movimientos</th>
                                    <th name="OBSERVA_VALE_ColumnHeaderSorted">Observa Vale</th>
                                    <th name="EGRESO_ColumnHeaderSorted">Cargos</th>
                                    <th name="INGRESO_ColumnHeaderSorted">Abonos</th>
                                    <th name="SALDO_ColumnHeaderSorted">Saldo</th>
                                    <th name="MONTOS_ColumnHeaderSorted">Montos</th>
                                </tr>
                                <tr name="DataContainer" class="tableRowOdd">
                                    <td>08/09/2025</td>
                                    <td>Transferencia a fintual</td>
                                    <td>Transferencia A Fintual</td>
                                    <td>$ 3.430.000</td>
                                    <td></td>
                                    <td>$ 4.821</td>
                                    <td>$ 3.430.000</td>
                                </tr>
                                <tr name="DataContainer" class="tableRowEven">
                                    <td>08/09/2025</td>
                                    <td>Transferencia a fintual</td>
                                    <td>Transferencia A Fintual</td>
                                    <td>$ 5.000.000</td>
                                    <td></td>
                                    <td>$ 3.434.821</td>
                                    <td>$ 5.000.000</td>
                                </tr>
                                <tr name="DataContainer" class="tableRowOdd">
                                    <td>01/09/2025</td>
                                    <td>Transferencia de alejandro a</td>
                                    <td>Transferencia De Alejandro A</td>
                                    <td></td>
                                    <td>$ 200.000</td>
                                    <td>$ 204.982</td>
                                    <td>$ 200.000</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>

    <div class="test-result">
        <h3>Test Results</h3>
        <div id="testResults">Running tests...</div>
    </div>

    <script>
        // Simplified test
        function testTableDetection() {
            const results = document.getElementById('testResults');
            const tables = document.querySelectorAll('table');
            
            results.innerHTML = `
                <p><strong>Tables found:</strong> ${tables.length}</p>
                <ul>
                    ${Array.from(tables).map((table, index) => {
                        const id = table.getAttribute('id') || table.getAttribute('name') || `table-${index}`;
                        const rows = table.querySelectorAll('tr');
                        const cells = table.querySelectorAll('td, th');
                        return `<li>${id}: ${rows.length} rows, ${cells.length} cells total</li>`;
                    }).join('')}
                </ul>
                <p><strong>Expected:</strong> The inner table (IFD_204_1_record_Table) should be prioritized over the container table (GroupContainer)</p>
            `;
        }
        
        // Run test when page loads
        window.addEventListener('load', testTableDetection);
    </script>
</body>
</html>