<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>State Persistence Test - TableLens Extension</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        .instructions {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
        }
        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #667eea;
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9em;
            letter-spacing: 0.5px;
        }
        tr:hover {
            background: rgba(102, 126, 234, 0.1);
        }
        tr:nth-child(even) {
            background: rgba(0, 0, 0, 0.02);
        }
        .table-description {
            background: rgba(255, 255, 255, 0.15);
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-style: italic;
        }
        .step {
            margin: 15px 0;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-left: 4px solid #fff;
            border-radius: 4px;
        }
        .highlight {
            background: rgba(255, 255, 255, 0.3);
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÑ State Persistence Test Page</h1>
        
        <div class="instructions">
            <h2>üìã Testing Instructions</h2>
            <p>This page is designed to test the new <span class="highlight">state persistence system</span> in TableLens. Follow these steps:</p>
            
            <div class="step">
                <strong>Step 1:</strong> Click the TableLens extension icon and extract tables from this page
            </div>
            
            <div class="step">
                <strong>Step 2:</strong> Open one of the tables below in the table viewer
            </div>
            
            <div class="step">
                <strong>Step 3:</strong> Make some changes:
                <ul>
                    <li>Change column types (click the emoji next to column headers)</li>
                    <li>Apply some filters (click the ‚ñº arrows in column headers)</li>
                    <li>Sort columns by clicking headers</li>
                    <li>Create a chart with the data</li>
                    <li>Switch between dark/light themes</li>
                </ul>
            </div>
            
            <div class="step">
                <strong>Step 4:</strong> Close the table viewer window
            </div>
            
            <div class="step">
                <strong>Step 5:</strong> Reopen the <strong>same table</strong> from the extension popup
            </div>
            
            <div class="step">
                <strong>Step 6:</strong> Verify that all your changes are preserved:
                <ul>
                    <li>Column types should be the same</li>
                    <li>Filters should still be active</li>
                    <li>Sorting should be maintained</li>
                    <li>Charts should be restored</li>
                    <li>Theme preference should be remembered</li>
                </ul>
            </div>
        </div>

        <div class="table-description">
            <strong>üè¢ Company Performance Data</strong> - Mixed data types for testing column type detection and state persistence
        </div>
        
        <table>
            <thead>
                <tr>
                    <th>Company</th>
                    <th>Revenue (2023)</th>
                    <th>Growth Rate</th>
                    <th>Employees</th>
                    <th>Founded</th>
                    <th>Industry</th>
                    <th>Market Cap</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>TechCorp Inc</td>
                    <td>$ 125,400,000</td>
                    <td>15.3%</td>
                    <td>1,250</td>
                    <td>2010-03-15</td>
                    <td>Technology</td>
                    <td>$ 2,840,000,000</td>
                </tr>
                <tr>
                    <td>GreenEnergy Ltd</td>
                    <td>$ 89,750,000</td>
                    <td>22.7%</td>
                    <td>980</td>
                    <td>2015-08-22</td>
                    <td>Energy</td>
                    <td>$ 1,950,000,000</td>
                </tr>
                <tr>
                    <td>HealthPlus Systems</td>
                    <td>$ 210,300,000</td>
                    <td>8.9%</td>
                    <td>2,100</td>
                    <td>2008-11-03</td>
                    <td>Healthcare</td>
                    <td>$ 4,200,000,000</td>
                </tr>
                <tr>
                    <td>AutoDrive Motors</td>
                    <td>$ 456,800,000</td>
                    <td>-2.1%</td>
                    <td>3,400</td>
                    <td>1998-05-17</td>
                    <td>Automotive</td>
                    <td>$ 8,900,000,000</td>
                </tr>
                <tr>
                    <td>CloudFirst Solutions</td>
                    <td>$ 67,200,000</td>
                    <td>45.6%</td>
                    <td>540</td>
                    <td>2018-02-08</td>
                    <td>Technology</td>
                    <td>$ 1,100,000,000</td>
                </tr>
                <tr>
                    <td>RetailMax Chain</td>
                    <td>$ 1,250,000,000</td>
                    <td>3.4%</td>
                    <td>12,500</td>
                    <td>1985-09-12</td>
                    <td>Retail</td>
                    <td>$ 15,600,000,000</td>
                </tr>
                <tr>
                    <td>BioPharm Research</td>
                    <td>$ 340,900,000</td>
                    <td>18.2%</td>
                    <td>1,800</td>
                    <td>2012-04-25</td>
                    <td>Pharmaceutical</td>
                    <td>$ 7,800,000,000</td>
                </tr>
                <tr>
                    <td>DataMine Analytics</td>
                    <td>$ 78,500,000</td>
                    <td>28.9%</td>
                    <td>420</td>
                    <td>2019-07-14</td>
                    <td>Technology</td>
                    <td>$ 850,000,000</td>
                </tr>
            </tbody>
        </table>

        <div class="table-description">
            <strong>üåç Global Climate Data</strong> - Numeric data perfect for testing statistical functions and chart generation
        </div>
        
        <table>
            <thead>
                <tr>
                    <th>Region</th>
                    <th>Avg Temp (¬∞C)</th>
                    <th>Rainfall (mm)</th>
                    <th>Humidity (%)</th>
                    <th>CO2 Levels (ppm)</th>
                    <th>Last Updated</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>North America</td>
                    <td>12.8</td>
                    <td>1,247</td>
                    <td>65.2%</td>
                    <td>418.5</td>
                    <td>2024-09-15</td>
                </tr>
                <tr>
                    <td>South America</td>
                    <td>22.3</td>
                    <td>2,156</td>
                    <td>78.9%</td>
                    <td>415.8</td>
                    <td>2024-09-15</td>
                </tr>
                <tr>
                    <td>Europe</td>
                    <td>9.7</td>
                    <td>987</td>
                    <td>72.1%</td>
                    <td>419.2</td>
                    <td>2024-09-16</td>
                </tr>
                <tr>
                    <td>Asia</td>
                    <td>18.4</td>
                    <td>1,834</td>
                    <td>68.5%</td>
                    <td>421.3</td>
                    <td>2024-09-16</td>
                </tr>
                <tr>
                    <td>Africa</td>
                    <td>24.6</td>
                    <td>1,456</td>
                    <td>58.7%</td>
                    <td>416.9</td>
                    <td>2024-09-14</td>
                </tr>
                <tr>
                    <td>Australia</td>
                    <td>21.9</td>
                    <td>534</td>
                    <td>48.3%</td>
                    <td>417.4</td>
                    <td>2024-09-15</td>
                </tr>
                <tr>
                    <td>Antarctica</td>
                    <td>-28.7</td>
                    <td>156</td>
                    <td>82.1%</td>
                    <td>413.2</td>
                    <td>2024-09-13</td>
                </tr>
            </tbody>
        </table>

        <div class="table-description">
            <strong>üõí Product Sales Summary</strong> - Financial data with various formats to test number parsing and formatting
        </div>
        
        <table>
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Units Sold</th>
                    <th>Price Each</th>
                    <th>Total Revenue</th>
                    <th>Profit Margin</th>
                    <th>Launch Date</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>SmartPhone Pro X</td>
                    <td>15,240</td>
                    <td>$ 899.99</td>
                    <td>$ 13,715,975.60</td>
                    <td>32.5%</td>
                    <td>2023-01-15</td>
                </tr>
                <tr>
                    <td>Wireless Earbuds</td>
                    <td>28,950</td>
                    <td>$ 149.50</td>
                    <td>$ 4,329,025.00</td>
                    <td>45.8%</td>
                    <td>2023-03-20</td>
                </tr>
                <tr>
                    <td>Tablet Ultra</td>
                    <td>8,760</td>
                    <td>$ 1,299.00</td>
                    <td>$ 11,382,240.00</td>
                    <td>28.9%</td>
                    <td>2023-02-08</td>
                </tr>
                <tr>
                    <td>Smart Watch</td>
                    <td>19,430</td>
                    <td>$ 399.99</td>
                    <td>$ 7,771,805.70</td>
                    <td>38.2%</td>
                    <td>2023-04-12</td>
                </tr>
                <tr>
                    <td>Gaming Console</td>
                    <td>4,290</td>
                    <td>$ 549.99</td>
                    <td>$ 2,359,457.10</td>
                    <td>22.1%</td>
                    <td>2023-06-05</td>
                </tr>
                <tr>
                    <td>Laptop Pro</td>
                    <td>6,850</td>
                    <td>$ 1,899.00</td>
                    <td>$ 13,008,150.00</td>
                    <td>35.7%</td>
                    <td>2023-05-18</td>
                </tr>
            </tbody>
        </table>

        <div class="step">
            <strong>üí° Expected Behaviors:</strong>
            <ul>
                <li>State should persist for <span class="highlight">24 hours</span> in session storage</li>
                <li>Each table gets a unique ID for reliable state tracking</li>
                <li>Charts are fully restored with original configurations</li>
                <li>Filters maintain exact values and selections</li>
                <li>Theme changes are remembered across sessions</li>
                <li>Opening different tables should load their respective states</li>
            </ul>
        </div>
    </div>
</body>
</html>